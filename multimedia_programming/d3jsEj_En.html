<!DOCTYPE html>
<html>
 <head>
    <meta charset=utf-8 />
	<script type="text/javascript" src="../js/d3.v3.js"></script>	
	</head>
	<body>
		<script type="text/javascript">
			//Width and height
			var w = 500;
			var h = 550;
			//Original data
			var dataset = {
				nodes: [
					{ name: "X3DOM" }, //0
					{ name: "Scene" }, //1
					{ name: "Viewpoint" }, //2
					{ name: "directionalLight" }, //3
					{ name: "transformTablero" }, //4
					{ name: "shape" }, //5
					{ name: "appearance" }, //6
					{ name: "ImageTexture" }, //7
					{ name: "plane" }, //8
					
					{ name: "transformTitle" }, //9
					{ name: "shape" }, //10
					{ name: "appearance" }, //11
					{ name: "material" }, //12
					{ name: "text" }, //13
					
					{ name: "transformBall" }, //14
					{ name: "shape" }, //15
					{ name: "appearance" }, //16
					{ name: "material" }, //17
					{ name: "sphere" }, //18
					
					{ name: "transformBall2" }, //19
					{ name: "shape" }, //20
					{ name: "appearance" }, //21
					{ name: "material" }, //22
					{ name: "sphere" } //23
					
				],
				edges: [
					{ source: 0, target: 1 }, //1   5
					{ source: 1, target: 2 }, //2   4
					{ source: 1, target: 3 }, //3   4
					{ source: 1, target: 4 }, //4   4
					{ source: 4, target: 5 }, //5     3
					{ source: 5, target: 6 }, //6       2
					{ source: 5, target: 8 }, //7       2
					{ source: 6, target: 7 }, //8	       1
					{ source: 1, target: 9 }, //9   4
					{ source: 9, target: 10 }, //10   3
					{ source: 10, target: 11 },  //11   2
					{ source: 10, target: 13 },  //12   2
					{ source: 11, target: 12 }, //13       1
					{ source: 1, target: 14 }, //14  4
					{ source: 14, target: 15 }, //15   3
					{ source: 15, target: 16 },  //16   2
					{ source: 15, target: 18 }, //17    2
					{ source: 16, target: 17 }, //18        1
					
					{ source: 1, target: 19 }, //19  4
					{ source: 19, target: 20 }, //20   3
					{ source: 20, target: 21 },  //21   2
					{ source: 20, target: 23 }, //22    2
					{ source: 21, target: 22 } //23        1
				]
			};
			
			//Initialize a default force layout, using the nodes and edges in dataset
			var force = d3.layout.force()
								 .nodes(dataset.nodes)
								 .links(dataset.edges)
								 .size([w, h])
								 .linkDistance(function(d, i){
									var dist = 50;
									switch (i){
									case 0: //raiz
										dist = 100;
										break;
										
									case 1:
									case 2: 
									case 3: 
									case 8:
									case 13:
									case 18:
										dist = 65;
										break;
										
									case 4:
									case 9:
									case 14:
									case 19:
										dist = 50;
										break;
										
									case 5: 
									case 6:
									case 10:
									case 11:
									case 15:
									case 16: 
									case 20:
									case 21:
										dist = 30;
										break;
										
									case 7: 
									case 12:
									case 17:
									case 22:
										dist = 25;
										break;		
								}
								return dist;
								 
								 
								 })
								 .charge([-100])								
								 .start();

			var colors = d3.scale.category20();
			
			//Create SVG element
			var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h);
			
			//Create edges as lines
			var edges = svg.selectAll("line")
				.data(dataset.edges)
				.enter()
				.append("line")
				.style("stroke", "#ccc")
				.style("stroke-width", function(d, i) {
					var grosor = 0;
					switch (i){
						case 0: //raiz
							grosor = 5;
							break;
							
						case 1:
						case 2: 
						case 3: 
						case 8:
						case 13:
						case 18:
							grosor = 4;
							break;
							
						case 4:
						case 9:
						case 14:
						case 19:
							grosor = 3;
							break;
							
						case 5: 
						case 6:
						case 10:
						case 11:
						case 15:
						case 16: 
						case 20:
						case 21:
							grosor = 2;
							break;
							
						case 7: 
						case 12:
						case 17:
						case 22:
							grosor = 1;
							break;		
					}
					return grosor;
				})
			
			//Create nodes as circles
			var nodes = svg.selectAll("circle")
				.data(dataset.nodes)
				.enter()
				.append("circle")
				.attr("r", function(d, i) {
					var radio = 0;
					switch (i){
						case 0: //raiz
							radio = 25;
							break;
						case 1: //scene
							radio = 20;
							break;
						case 2: //viewport
						case 3: //light
						case 4: //transform
						case 9:
						case 14:
						case 19:
							radio = 15;
							break;
						case 5: //shape
						case 10:
						case 15:
						case 20:
							radio = 10;
							break;
						case 6: //appearance
						case 11:
						case 16:
						case 21:
						case 8: //plane
						case 13: //text
						case 18: //bola
						case 23:
							radio = 7;
							break;
						case 7: //img
						case 12: //material
						case 17:
						case 22:
							radio = 5;
							break;		
					}
					return radio;
				})
				.style("fill", function(d, i) {
					var indice = 0;
					switch (i){
						case 0: //raiz
							indice = 0;
							break;
						case 1: //scene
							indice = 1;
							break;
						case 2: //viewport
							indice = 2;
							break;
						case 3: //light
							indice = 3;
							break;
						case 4: //transform
						case 9:
						case 14:
						case 19:
							indice = 4;
							break;
						case 5: //shape
						case 10:
						case 15:
						case 20:
							indice = 5;
							break;
						case 6: //appearance
						case 11:
						case 16:
						case 21:
							indice = 6;
							break;
						case 8: //plane
							indice = 7;
							break;
						case 13: //text
							indice = 8;
							break;
						case 18: //bola
						case 23:
							indice = 9;
							break;
						case 7: //img
							indice = 10;
							break;
						case 12: //material
						case 22:
						case 17:
							indice = 11;
							break;		
					}
					return colors(indice);
				})
				.call(force.drag);
				
				//Create labels
			var text = svg.selectAll("text")
				.data(dataset.nodes)
			    .enter()
			    .append("text")
			    .text(function(d) {
			   		return d.name;
			   })
			   .attr("x", function(d, i) {
			   		return d.x;
			   })
			   .attr("y", function(d, i) {
			   		return d.y;
			   })
			   .attr("font-family", "sans-serif")
			   .attr("font-size", "10px")
			   .attr("fill", "#999");
				
			
			//Every time the simulation "ticks", this will be called
			force.on("tick", function() {
				edges.attr("x1", function(d) { return d.source.x; })
					 .attr("y1", function(d) { return d.source.y; })
					 .attr("x2", function(d) { return d.target.x; })
					 .attr("y2", function(d) { return d.target.y; });
			
				nodes.attr("cx", function(d) { return d.x; })
					 .attr("cy", function(d) { return d.y; });
				
				text.attr("x", function(d) { return d.x;}); 
				text.attr("y", function(d) { return d.y;}); 
	
			});
		</script>
	</body>
</html>